/* ==========================================================================
   FOCAL – Gestionar Proveedores y Precios
   Vista responsiva con tabla “normal” en desktop y “tarjetas” en móvil.
   Mantiene navbar/footer y paleta de FOCAL.
   ========================================================================== */

/* ------------------------ Variables de marca ----------------------------- */
:root{
  --primary-purple:#4A008B;
  --primary-purple-700:#3E0075;
  --primary-purple-800:#330061;
  --light-purple:#F3E8FF;

  --bg-soft:#F6F2FA;
  --white:#FFFFFF;

  --dark-text:#212529;
  --muted-text:#6C757D;
  --border:#E6E6EF;

  --focus:rgba(74,0,139,.28);
  --shadow-1:0 6px 18px rgba(0,0,0,.08);

  --danger:#DC3545;
  --danger-dark:#B71C1C;

  --font-primary:'InterTight', Arial, sans-serif;
  --font-secondary:'HankenGrotesk', Arial, sans-serif;
}

/* (Opcional) Cargas locales si existen en /static */
@font-face{font-family:'InterTight';src:url('../fonts/InterTight/InterTight-Bold.ttf') format('truetype');font-weight:800;}
@font-face{font-family:'HankenGrotesk';src:url('../fonts/HankenGrotesk/HankenGrotesk-Regular.ttf') format('truetype');font-weight:400;}

/* ------------------------------- Base ----------------------------------- */
*,
*::before,
*::after{box-sizing:border-box}
html{scroll-behavior:smooth}
body{
  margin:0; min-height:100vh; display:flex; flex-direction:column;
  background:var(--bg-soft); color:var(--dark-text);
  font-family:var(--font-secondary); line-height:1.6;
  -webkit-text-size-adjust:100%;
}
.container{width:min(1200px,92%);margin-inline:auto}

/* ------------------------------ Navbar ---------------------------------- */
.app-header{
  background:var(--primary-purple); color:#fff; position:sticky; top:0; z-index:10;
  box-shadow:0 2px 10px rgba(0,0,0,.08)
}
.app-header nav.container{
  display:flex; align-items:center; justify-content:space-between; gap:.75rem; padding:.9rem 0
}
.app-header .logo{
  color:#fff; text-decoration:none; font-family:var(--font-primary); font-weight:800;
  letter-spacing:-.02em; font-size:1.5rem
}
.nav-links{list-style:none;display:flex;flex-wrap:wrap;align-items:center;gap:.5rem .75rem;margin:0;padding:0}
.nav-links a{
  display:inline-flex; align-items:center; justify-content:center;
  padding:.55rem .9rem; border-radius:10px;
  border:2px solid rgba(255,255,255,.25);
  color:#fff; text-decoration:none;
  font-family:var(--font-primary); font-weight:800; letter-spacing:.02em;
  transition:background .2s,border-color .2s,transform .15s
}
.nav-links a:hover{background:rgba(255,255,255,.12);border-color:rgba(255,255,255,.45);transform:translateY(-1px)}
.nav-links a:focus-visible{outline:0;box-shadow:0 0 0 3px rgba(255,255,255,.55)}

/* ------------------------------ Headings -------------------------------- */
main{flex:1;padding:2rem 0 3rem}
.page-head h1{
  margin:0 0 .35rem;
  font-family:var(--font-primary); font-weight:800;
  font-size:clamp(1.7rem,3.2vw,2.4rem);
  letter-spacing:-.01em;
}
.section-note{color:var(--muted-text);margin:0 0 1.25rem}

/* Tarjeta base */
.card{
  background:var(--white);
  border-radius:14px;
  box-shadow:var(--shadow-1);
  padding:clamp(1rem,2.3vw,1.4rem);
}

/* ------------------------------ Toolbelt -------------------------------- */
.toolbelt{margin:0 0 1rem}
.toolbelt-grid{
  display:grid; grid-template-columns: 1.1fr minmax(320px,560px);
  gap:1.25rem 2rem; align-items:end;
}
.tool-text h2{
  margin:.1rem 0 .25rem;
  font-family:var(--font-primary); font-weight:800; font-size:clamp(1.05rem,2.1vw,1.35rem)
}
.tool-text .muted{color:var(--muted-text);margin:0}

/* Form SKU */
.sku-form{display:grid; grid-template-columns:1fr auto; gap:.85rem}
.sku-form label{position:absolute !important;width:1px;height:1px;margin:-1px;padding:0;overflow:hidden;clip:rect(0,0,0,0);border:0}
.sku-form input{
  width:100%; background:#FDFDFF; border:1px solid var(--border); border-radius:10px;
  padding:.85rem 1rem; font:inherit;
  transition:border-color .2s,box-shadow .2s,background .2s;
  font-variant-numeric: tabular-nums;
}
.sku-form input:focus{outline:0;border-color:var(--primary-purple);box-shadow:0 0 0 4px var(--focus);background:#fff}
.validation-message{min-height:1.1rem;font-size:.92rem;margin-top:.6rem;color:var(--muted-text)}
.validation-message.error{color:var(--danger)}
.validation-message.success{color:#198754}

/* -------------------------- Resumen producto ---------------------------- */
.product-summary{margin:1rem 0}
.summary-grid{display:grid;grid-template-columns:1fr auto auto;gap:.75rem;align-items:center}
.product-title{margin:0;font-family:var(--font-primary);font-weight:800;font-size:clamp(1.15rem,2.2vw,1.35rem)}
.sku-pill{
  justify-self:start; background:var(--light-purple); color:var(--primary-purple);
  border:1px solid #E8D4FF; padding:.45rem .7rem; border-radius:999px; font-weight:600
}

/* ----------------------------- Panel lotes ------------------------------ */
.panel{margin:1rem 0}
.panel-head{display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between;gap:.8rem;margin-bottom:.75rem}
.panel-head h3{margin:0;font-family:var(--font-primary);font-weight:800;font-size:clamp(1.05rem,2.1vw,1.25rem)}
.panel-actions{display:flex;flex-wrap:wrap;gap:.6rem}

/* ----------------------------- Tabla (desktop) -------------------------- */
.table-wrap{margin-top:.4rem}
.table-container{
  position:relative;width:100%;overflow:auto;-webkit-overflow-scrolling:touch;overscroll-behavior:contain;
  border:1px solid var(--border);border-radius:12px;box-shadow:var(--shadow-1);background:#fff;
}
.table-container::after{
  content:"Desliza →";position:absolute; right:.6rem; top:.5rem;font-size:.82rem;color:var(--muted-text);
}
@media (min-width: 768px){ .table-container::after{content:none} }

.tabla-inventario{
  width:100%;
  min-width: 620px;
  border-collapse:collapse;background:#fff;
}
.tabla-inventario thead{
  position:sticky; top:0; z-index:2;
  background:linear-gradient(0deg, var(--primary-purple), var(--primary-purple));
  color:#fff;font-family:var(--font-primary);
}
.tabla-inventario th{
  position:sticky; top:0; white-space:nowrap; padding:1rem 1.2rem; font-weight:800;
}
.tabla-inventario th:first-child,
.tabla-inventario td:first-child{
  position:sticky; left:0; z-index:1; background:#fff; box-shadow: 1px 0 0 var(--border);
}
.tabla-inventario td{
  padding:1rem 1.2rem;border-bottom:1px solid var(--border);white-space:nowrap;font-variant-numeric: tabular-nums;
}
.tabla-inventario tbody tr{transition:background .2s}
.tabla-inventario tbody tr:hover{background:#F7F2FF}
.tabla-inventario td.acciones .btn{margin-right:.35rem}

/* Estados de fila */
.vencido{background:#FFEBEE !important}
.proximo-vencer{background:#FFFDE7 !important}
.stock-bajo{background:#E3F2FD !important}

/* ------------------------ Transformación a “tarjetas” ------------------- */
/* A partir de 640px hacia abajo convertimos la tabla a cards sin tocar HTML */
@media (max-width:640px){

  .table-container{border:none;box-shadow:none;background:transparent}
  .table-container::after{content:none}

  .tabla-inventario{
    min-width:0;width:100%;border-collapse:separate;border-spacing:0 14px;
  }

  .tabla-inventario thead{display:none}

  .tabla-inventario tbody{display:block}

  .tabla-inventario tr{
    display:block;background:#fff;border:1px solid var(--border);border-radius:14px;
    box-shadow:var(--shadow-1);padding:.25rem .25rem;margin:0;
  }

  .tabla-inventario td{
    display:flex;align-items:center;gap:.75rem;
    padding:.7rem .95rem;border:0;border-bottom:1px solid var(--border);
    white-space:normal;word-break:break-word;
  }
  .tabla-inventario td:last-child{border-bottom:0}

  /* Etiquetas simulando los <th> (ajustar si cambia el orden de columnas) */
  .tabla-inventario td::before{
    content:attr(data-label);
    flex:0 0 46%;
    color:var(--muted-text);font-weight:600;letter-spacing:.01em;
  }

  /* Si el template NO trae data-labels, usa títulos por posición: */
  .tabla-inventario td:nth-child(1)::before{content:"ID Lote";}
  .tabla-inventario td:nth-child(2)::before{content:"Fecha Vencimiento";}
  .tabla-inventario td:nth-child(3)::before{content:"Cantidad";}
  .tabla-inventario td:nth-child(4)::before{content:"Proveedor";}
  .tabla-inventario td:nth-child(5)::before{content:"Precio Compra";}
  .tabla-inventario td:nth-child(6)::before{content:"Precio Venta";}
  .tabla-inventario td:nth-child(7)::before{content:"Acciones";}

  /* Acciones en bloque */
  .tabla-inventario td.acciones{
    display:flex;flex-direction:column;align-items:stretch;gap:.5rem;
  }
  .tabla-inventario td.acciones .btn{margin:0}
}

/* ------------------------------ Botones --------------------------------- */
.btn{
  display:inline-block; text-decoration:none; text-align:center; cursor:pointer;
  padding:.85rem 1.15rem; border-radius:10px; border:2px solid transparent;
  font-family:var(--font-primary); font-weight:800; letter-spacing:.02em;
  transition:transform .15s, box-shadow .2s, background .2s, border-color .2s;
}
.btn:hover{transform:translateY(-1px); box-shadow:var(--shadow-1)}
.btn:active{transform:translateY(0)}
.btn-primary{background:var(--primary-purple); color:#fff; border-color:var(--primary-purple)}
.btn-primary:hover{background:var(--primary-purple-700); border-color:var(--primary-purple-700)}
.btn-secondary{background:#fff; color:var(--muted-text); border-color:var(--border)}
.btn-secondary:hover{background:#F3F4F6; color:#2F3640; border-color:#CDD3DA}
.btn-danger{background:var(--danger); color:#fff; border-color:var(--danger)}
.btn-danger:hover{background:var(--danger-dark); border-color:var(--danger-dark)}
.btn-sm{padding:.55rem .8rem; font-size:.92rem}

.footer-actions{display:flex;gap:.75rem;flex-wrap:wrap;justify-content:flex-start;margin-top:1rem}

/* ------------------------------- Footer --------------------------------- */
.app-footer{
  background:var(--primary-purple); color:#fff; text-align:center; padding:1.2rem 0; margin-top:auto
}
.app-footer p{margin:0}

/* ---------------------------- Responsividad ----------------------------- */
@media (max-width: 992px){
  main{padding:1.5rem 0 2.25rem}
}
@media (max-width: 768px){
  .app-header nav.container{width:94%}
  .nav-links a{padding:.5rem .72rem;font-size:.95rem}

  .toolbelt-grid{grid-template-columns:1fr}
  .sku-form{grid-template-columns:1fr;gap:.75rem}
  .summary-grid{grid-template-columns:1fr;gap:.5rem}
  .panel-actions{justify-content:center}
  .footer-actions{justify-content:center}

  .tabla-inventario th, .tabla-inventario td{font-size:.95rem}
}
@media (max-width: 480px){
  .tabla-inventario th, .tabla-inventario td{font-size:.92rem}
}
@media (prefers-reduced-motion: reduce){
  .btn,.nav-links a,.sku-form input{transition:none}
}